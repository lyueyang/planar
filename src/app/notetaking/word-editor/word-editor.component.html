<mat-card *ngIf="isElementReady()">
  <form [formGroup]="notesForm" (ngSubmit)="saveNotes()">
    <mat-card-header fxLayout="row" fxLayoutAlign="start center">
      <mat-card-title style="margin: 0 0;">
        Notes
      </mat-card-title>

      <button mat-icon-button
                matTooltip="Add chapter"
                [matTooltipPosition]= "'right'"
                [matTooltipShowDelay]= "500"
                (click)="addChapter()"
                type="button">
          <i class="material-icons">add</i>
        </button>

      <button mat-icon-button
              matTooltip="Save notes"
              [matTooltipPosition]= "'below'"
              [matTooltipShowDelay]= "500"
              (click)="saveNotes()">
        <i class="material-icons">save</i>
      </button>
    </mat-card-header>

    <mat-card-content>
      <div fxLayout="row"
           formArrayName="myNotes"
           *ngFor='let chapter of myNotes.controls; let i = index'
           id="form">
        <button mat-icon-button
                matTooltip="Remove note"
                [matTooltipPosition]= "'below'"
                [matTooltipShowDelay]= "500"
                (click)="removeNote(i)"
                type="button">
            <i class="material-icons">delete</i>
        </button>
        <mat-form-field [formGroupName]="i" fxFlexFill>
          <mat-label>Chapter {{i + 1}}</mat-label>
          <textarea cdkTextareaAutosize="true" matInput formControlName="notes"></textarea>
        </mat-form-field>
      </div>
    </mat-card-content>
  </form>
</mat-card>
